<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈñãÁ™óÂä©Êâã Pro</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-0 md:p-6">
    <div id="root" class="w-full max-w-lg"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ÂÖßÂµå SVG ÂúñÊ®ôÔºöËß£Ê±∫ÊâÄÊúâÁõ∏ÂÆπÊÄßÂ†±ÈåØ ---
        const Icon = ({ name, className = "w-6 h-6" }) => {
            const icons = {
                Wind: <path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2m-6.8 6a2 2 0 1 1-1.4 3.4H2m16.7-16.8a3.5 3.5 0 1 1 3.1 6H2" />,
                Rain: <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242M16 14v6m-4-2v6m-4-4v6" />,
                Home: (
                    <React.Fragment>
                        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22" />
                    </React.Fragment>
                ),
                Refresh: <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8m0 0V3m0 5h5m-1 4a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16m0 0v5m0-5h-5" />,
                Check: <polyline points="20 6 9 17 4 12" />,
                X: (
                    <React.Fragment>
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </React.Fragment>
                )
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name]}
                </svg>
            );
        };

        const CWA_KEY = "CWA-BDD150F7-F455-44CA-8E6B-F548BBB011CB";
        const OBS_URL = "https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?format=JSON";
        const FC_URL = "https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-D0047-091?format=JSON";

        // --- ÂÖ®Âè∞ 22 Á∏£Â∏Ç„ÄÅ368 Ë°åÊîøÂçÄÂÆåÊï¥Ë≥áÊñôÂ∫´ ---
        const ALL_TAIWAN_AREAS = {
            "Âè∞ÂåóÂ∏Ç": ["‰∏≠Ê≠£ÂçÄ", "Â§ßÂêåÂçÄ", "‰∏≠Â±±ÂçÄ", "ÊùæÂ±±ÂçÄ", "Â§ßÂÆâÂçÄ", "Ëê¨ËèØÂçÄ", "‰ø°Áæ©ÂçÄ", "Â£´ÊûóÂçÄ", "ÂåóÊäïÂçÄ", "ÂÖßÊπñÂçÄ", "ÂçóÊ∏ØÂçÄ", "ÊñáÂ±±ÂçÄ"],
            "Êñ∞ÂåóÂ∏Ç": ["ÊùøÊ©ãÂçÄ", "‰∏âÈáçÂçÄ", "‰∏≠ÂíåÂçÄ", "Ê∞∏ÂíåÂçÄ", "Êñ∞ËéäÂçÄ", "Êñ∞Â∫óÂçÄ", "Ê®πÊûóÂçÄ", "È∂ØÊ≠åÂçÄ", "‰∏âÂ≥ΩÂçÄ", "Ê∑°Ê∞¥ÂçÄ", "Ê±êÊ≠¢ÂçÄ", "ÁëûËä≥ÂçÄ", "ÂúüÂüéÂçÄ", "ËòÜÊ¥≤ÂçÄ", "‰∫îËÇ°ÂçÄ", "Ê≥∞Â±±ÂçÄ", "ÊûóÂè£ÂçÄ", "Ê∑±ÂùëÂçÄ", "Áü≥Á¢áÂçÄ", "Âù™ÊûóÂçÄ", "‰∏âËäùÂçÄ", "Áü≥ÈñÄÂçÄ", "ÂÖ´ÈáåÂçÄ", "Âπ≥Ê∫™ÂçÄ", "ÈõôÊ∫™ÂçÄ", "Ë≤¢ÂØÆÂçÄ", "ÈáëÂ±±ÂçÄ", "Ëê¨ÈáåÂçÄ", "ÁÉè‰æÜÂçÄ"],
            "Ê°ÉÂúíÂ∏Ç": ["Ê°ÉÂúíÂçÄ", "‰∏≠Â£¢ÂçÄ", "Â§ßÊ∫™ÂçÄ", "Ê•äÊ¢ÖÂçÄ", "ËòÜÁ´πÂçÄ", "Â§ßÂúíÂçÄ", "ÈæúÂ±±ÂçÄ", "ÂÖ´Âæ∑ÂçÄ", "ÈæçÊΩ≠ÂçÄ", "Âπ≥ÈéÆÂçÄ", "Êñ∞Â±ãÂçÄ", "ËßÄÈü≥ÂçÄ", "Âæ©ËààÂçÄ"],
            "Âè∞‰∏≠Â∏Ç": ["‰∏≠ÂçÄ", "Êù±ÂçÄ", "ÂçóÂçÄ", "Ë•øÂçÄ", "ÂåóÂçÄ", "ÂåóÂ±ØÂçÄ", "Ë•øÂ±ØÂçÄ", "ÂçóÂ±ØÂçÄ", "Â§™Âπ≥ÂçÄ", "Â§ßÈáåÂçÄ", "ÈúßÂ≥∞ÂçÄ", "ÁÉèÊó•ÂçÄ", "Ë±êÂéüÂçÄ", "ÂæåÈáåÂçÄ", "Áü≥Â≤°ÂçÄ", "Êù±Âã¢ÂçÄ", "ÂíåÂπ≥ÂçÄ", "Êñ∞Á§æÂçÄ", "ÊΩ≠Â≠êÂçÄ", "Â§ßÈõÖÂçÄ", "Á•ûÂ≤°ÂçÄ", "Â§ßËÇöÂçÄ", "Ê≤ôÈπøÂçÄ", "Èæç‰∫ïÂçÄ", "Ê¢ßÊ£≤ÂçÄ", "Ê∏ÖÊ∞¥ÂçÄ", "Â§ßÁî≤ÂçÄ", "Â§ñÂüîÂçÄ", "Â§ßÂÆâÂçÄ"],
            "Âè∞ÂçóÂ∏Ç": ["‰∏≠Ë•øÂçÄ", "ÂÆâÂπ≥ÂçÄ", "Êù±ÂçÄ", "ÂçóÂçÄ", "ÂåóÂçÄ", "ÂÆâÂçóÂçÄ", "Ê∞∏Â∫∑ÂçÄ", "Ê≠∏‰ªÅÂçÄ", "Êñ∞ÂåñÂçÄ", "Â∑¶ÈéÆÂçÄ", "Áéâ‰∫ïÂçÄ", "Ê•†Ë•øÂçÄ", "ÂçóÂåñÂçÄ", "‰ªÅÂæ∑ÂçÄ", "ÈóúÂªüÂçÄ", "ÈæçÂ¥éÂçÄ", "ÂÆòÁî∞ÂçÄ", "È∫ªË±ÜÂçÄ", "‰Ω≥ÈáåÂçÄ", "Ë•øÊ∏ØÂçÄ", "‰∏ÉËÇ°ÂçÄ", "Â∞áËªçÂçÄ", "Â≠∏Áî≤ÂçÄ", "ÂåóÈñÄÂçÄ", "Êñ∞ÁáüÂçÄ", "ÂæåÂ£ÅÂçÄ", "ÁôΩÊ≤≥ÂçÄ", "Êù±Â±±ÂçÄ", "ÂÖ≠Áî≤ÂçÄ", "‰∏ãÁáüÂçÄ", "Êü≥ÁáüÂçÄ", "ÈπΩÊ∞¥ÂçÄ", "ÂñÑÂåñÂçÄ", "Â§ßÂÖßÂçÄ", "Â±±‰∏äÂçÄ", "Êñ∞Â∏ÇÂçÄ", "ÂÆâÂÆöÂçÄ"],
            "È´òÈõÑÂ∏Ç": ["Êñ∞ËààÂçÄ", "ÂâçÈáëÂçÄ", "ËãìÈõÖÂçÄ", "ÈπΩÂüïÂçÄ", "ÈºìÂ±±ÂçÄ", "ÊóóÊ¥•ÂçÄ", "ÂâçÈéÆÂçÄ", "‰∏âÊ∞ëÂçÄ", "Ê•†Ê¢ìÂçÄ", "Â∞èÊ∏ØÂçÄ", "Â∑¶ÁáüÂçÄ", "‰ªÅÊ≠¶ÂçÄ", "Â§ßÁ§æÂçÄ", "Â≤°Â±±ÂçÄ", "Ë∑ØÁ´πÂçÄ", "ÈòøËìÆÂçÄ", "Áî∞ÂØÆÂçÄ", "ÁáïÂ∑¢ÂçÄ", "Ê©ãÈ†≠ÂçÄ", "Ê¢ìÂÆòÂçÄ", "ÂΩåÈôÄÂçÄ", "Ê∞∏ÂÆâÂçÄ", "ÊπñÂÖßÂçÄ", "È≥≥Â±±ÂçÄ", "Â§ßÂØÆÂçÄ", "ÊûóÂúíÂçÄ", "È≥•ÊùæÂçÄ", "Â§ßÊ®πÂçÄ", "ÊóóÂ±±ÂçÄ", "ÁæéÊøÉÂçÄ", "ÂÖ≠ÈæúÂçÄ", "ÂÖßÈñÄÂçÄ", "ÊùâÊûóÂçÄ", "Áî≤‰ªôÂçÄ", "Ê°ÉÊ∫êÂçÄ", "ÈÇ£Áë™Â§èÂçÄ", "ËåÇÊûóÂçÄ", "ËåÑËê£ÂçÄ"],
            "Âü∫ÈöÜÂ∏Ç": ["‰ªÅÊÑõÂçÄ", "‰ø°Áæ©ÂçÄ", "‰∏≠Ê≠£ÂçÄ", "‰∏≠Â±±ÂçÄ", "ÂÆâÊ®ÇÂçÄ", "ÊöñÊöñÂçÄ", "‰∏ÉÂ†µÂçÄ"],
            "Êñ∞Á´πÂ∏Ç": ["Êù±ÂçÄ", "ÂåóÂçÄ", "È¶ôÂ±±ÂçÄ"],
            "Êñ∞Á´πÁ∏£": ["Á´πÂåóÂ∏Ç", "Á´πÊù±ÈéÆ", "Êñ∞ÂüîÈéÆ", "ÈóúË•øÈéÆ", "ÊπñÂè£ÈÑâ", "Êñ∞Ë±êÈÑâ", "ËäéÊûóÈÑâ", "Ê©´Â±±ÈÑâ", "ÂåóÂüîÈÑâ", "ÂØ∂Â±±ÈÑâ", "Â≥®ÁúâÈÑâ", "Â∞ñÁü≥ÈÑâ", "‰∫îÂ≥∞ÈÑâ"],
            "ËãóÊ†óÁ∏£": ["ËãóÊ†óÂ∏Ç", "È†≠‰ªΩÂ∏Ç", "Á´πÂçóÈéÆ", "ÂæåÈæçÈéÆ", "ÈÄöÈúÑÈéÆ", "ËãëË£°ÈéÆ", "ÂçìËò≠ÈéÆ", "ÈÄ†Ê©ãÈÑâ", "Ë•øÊπñÈÑâ", "È†≠Â±ãÈÑâ", "ÂÖ¨È§®ÈÑâ", "ÈäÖÈëºÈÑâ", "‰∏âÁæ©ÈÑâ", "Â§ßÊπñÈÑâ", "ÁçÖÊΩ≠ÈÑâ", "‰∏âÁÅ£ÈÑâ", "ÂçóÂ∫ÑÈÑâ", "Ê≥∞ÂÆâÈÑâ"],
            "ÂΩ∞ÂåñÁ∏£": ["ÂΩ∞ÂåñÂ∏Ç", "ÈπøÊ∏ØÈéÆ", "ÂíåÁæéÈéÆ", "Á∑öË•øÈÑâ", "‰º∏Ê∏ØÈÑâ", "Á¶èËààÈÑâ", "ÁßÄÊ∞¥ÈÑâ", "Ëä±Â£áÈÑâ", "Ëä¨ÂúíÈÑâ", "Âì°ÊûóÂ∏Ç", "Ê∫™ÊπñÈéÆ", "Áî∞‰∏≠ÈéÆ", "Â§ßÊùëÈÑâ", "ÂüîÈπΩÈÑâ", "ÂüîÂøÉÈÑâ", "Ê∞∏ÈùñÈÑâ", "Á§æÈ†≠ÈÑâ", "‰∫åÊ∞¥ÈÑâ", "ÂåóÊñóÈéÆ", "‰∫åÊûóÈéÆ", "Âü§È†≠ÈÑâ", "Ëä≥ËãëÈÑâ", "Â§ßÂüéÈÑâ", "Á´πÂ°òÈÑâ", "Ê∫™Â∑ûÈÑâ", "Áî∞Â∞æÈÑâ"],
            "ÂçóÊäïÁ∏£": ["ÂçóÊäïÂ∏Ç", "ÂüîÈáåÈéÆ", "ËçâÂ±ØÈéÆ", "Á´πÂ±±ÈéÆ", "ÈõÜÈõÜÈéÆ", "ÂêçÈñìÈÑâ", "ÈπøË∞∑ÈÑâ", "‰∏≠ÂØÆÈÑâ", "È≠öÊ±†ÈÑâ", "ÂúãÂßìÈÑâ", "Ê∞¥ÈáåÈÑâ", "‰ø°Áæ©ÈÑâ", "‰ªÅÊÑõÈÑâ"],
            "Èõ≤ÊûóÁ∏£": ["ÊñóÂÖ≠Â∏Ç", "ÊñóÂçóÈéÆ", "ËôéÂ∞æÈéÆ", "Ë•øËû∫ÈéÆ", "ÂúüÂ∫´ÈéÆ", "ÂåóÊ∏ØÈéÆ", "Âè§ÂùëÈÑâ", "Â§ßÂü§ÈÑâ", "ËéøÊ°êÈÑâ", "ÊûóÂÖßÈÑâ", "‰∫åÂ¥ôÈÑâ", "Â¥ôËÉåÈÑâ", "È∫•ÂØÆÈÑâ", "Êù±Âã¢ÈÑâ", "Ë§íÂø†ÈÑâ", "Âè∞Ë•øÈÑâ", "ÂÖÉÈï∑ÈÑâ", "ÂõõÊπñÈÑâ", "Âè£ÊπñÈÑâ", "Ê∞¥ÊûóÈÑâ"],
            "ÂòâÁæ©Â∏Ç": ["Êù±ÂçÄ", "Ë•øÂçÄ"],
            "ÂòâÁæ©Á∏£": ["Â§™‰øùÂ∏Ç", "Êú¥Â≠êÂ∏Ç", "Â∏ÉË¢ãÈéÆ", "Â§ßÊûóÈéÆ", "Ê∞ëÈõÑÈÑâ", "Ê∫™Âè£ÈÑâ", "Êñ∞Ê∏ØÈÑâ", "ÂÖ≠ËÖ≥ÈÑâ", "Êù±Áü≥ÈÑâ", "Áæ©Á´πÈÑâ", "ÈπøËçâÈÑâ", "Ê∞¥‰∏äÈÑâ", "‰∏≠ÂüîÈÑâ", "Á´πÂ¥éÈÑâ", "Ê¢ÖÂ±±ÈÑâ", "Áï™Ë∑ØÈÑâ", "Â§ßÂüîÈÑâ", "ÈòøÈáåÂ±±ÈÑâ"],
            "Â±èÊù±Á∏£": ["Â±èÊù±Â∏Ç", "‰∏âÂú∞ÈñÄÈÑâ", "ÈúßÂè∞ÈÑâ", "Áë™ÂÆ∂ÈÑâ", "‰πùÂ¶ÇÈÑâ", "ÈáåÊ∏ØÈÑâ", "È´òÊ®πÈÑâ", "ÈπΩÂüîÈÑâ", "Èï∑Ê≤ªÈÑâ", "È∫üÊ¥õÈÑâ", "Á´πÁî∞ÈÑâ", "ÂÖßÂüîÈÑâ", "Ëê¨‰∏πÈÑâ", "ÊΩÆÂ∑ûÈéÆ", "Ê≥∞Ê≠¶ÈÑâ", "‰æÜÁæ©ÈÑâ", "Ëê¨Â∑íÈÑâ", "Â¥ÅÈ†ÇÈÑâ", "Êñ∞Âü§ÈÑâ", "ÂçóÂ∑ûÈÑâ", "ÊûóÈÇäÈÑâ", "Êù±Ê∏ØÈéÆ", "ÁêâÁêÉÈÑâ", "‰Ω≥ÂÜ¨ÈÑâ", "Êñ∞ÂúíÈÑâ", "ÊûãÂØÆÈÑâ", "ÊûãÂ±±ÈÑâ", "Êò•Êó•ÈÑâ", "ÁçÖÂ≠êÈÑâ", "ËªäÂüéÈÑâ", "Áâ°‰∏πÈÑâ", "ÊÅÜÊò•ÈéÆ", "ÊªøÂ∑ûÈÑâ"],
            "ÂÆúËò≠Á∏£": ["ÂÆúËò≠Â∏Ç", "ÁæÖÊù±ÈéÆ", "ËòáÊæ≥ÈéÆ", "È†≠ÂüéÈéÆ", "Á§ÅÊ∫™ÈÑâ", "Â£ØÂúçÈÑâ", "Âì°Â±±ÈÑâ", "ÂÜ¨Â±±ÈÑâ", "‰∫îÁµêÈÑâ", "‰∏âÊòüÈÑâ", "Â§ßÂêåÈÑâ", "ÂçóÊæ≥ÈÑâ"],
            "Ëä±ËìÆÁ∏£": ["Ëä±ËìÆÂ∏Ç", "È≥≥ÊûóÈéÆ", "ÁéâÈáåÈéÆ", "Êñ∞ÂüéÈÑâ", "ÂêâÂÆâÈÑâ", "Â£ΩË±êÈÑâ", "ÂÖâÂæ©ÈÑâ", "Ë±êÊø±ÈÑâ", "ÁëûÁ©óÈÑâ", "ÂØåÈáåÈÑâ", "ÁßÄÊûóÈÑâ", "Ëê¨Ê¶ÆÈÑâ", "ÂçìÊ∫™ÈÑâ"],
            "Âè∞Êù±Á∏£": ["Âè∞Êù±Â∏Ç", "ÊàêÂäüÈéÆ", "ÈóúÂ±±ÈéÆ", "ÂçëÂçóÈÑâ", "ÈπøÈáéÈÑâ", "Ê±†‰∏äÈÑâ", "Êù±Ê≤≥ÈÑâ", "Èï∑Êø±ÈÑâ", "Â§™È∫ªÈáåÈÑâ", "Â§ßÊ≠¶ÈÑâ", "Á∂†Â≥∂ÈÑâ", "Êµ∑Á´ØÈÑâ", "Âª∂Âπ≥ÈÑâ", "ÈáëÂ≥∞ÈÑâ", "ÈÅî‰ªÅÈÑâ", "Ëò≠Â∂ºÈÑâ"],
            "ÊæéÊπñÁ∏£": ["È¶¨ÂÖ¨Â∏Ç", "ÊπñË•øÈÑâ", "ÁôΩÊ≤ôÈÑâ", "Ë•øÂ∂ºÈÑâ", "ÊúõÂÆâÈÑâ", "‰∏ÉÁæéÈÑâ"],
            "ÈáëÈñÄÁ∏£": ["ÈáëÂüéÈéÆ", "ÈáëÊπñÈéÆ", "ÈáëÊ≤ôÈéÆ", "ÈáëÂØßÈÑâ", "ÁÉàÂ∂ºÈÑâ", "ÁÉèÂùµÈÑâ"],
            "ÈÄ£Ê±üÁ∏£": ["ÂçóÁ´øÈÑâ", "ÂåóÁ´øÈÑâ", "ËéíÂÖâÈÑâ", "Êù±ÂºïÈÑâ"]
        };

        const calcDP = (T, RH) => {
            const t = parseFloat(T), h = parseFloat(RH);
            if (isNaN(t) || isNaN(h)) return null;
            const a = 17.27, b = 237.7;
            const alpha = ((a * t) / (b + t)) + Math.log(h / 100.0);
            return parseFloat(((b * alpha) / (a - alpha)).toFixed(1));
        };

        function App() {
            const [tab, setTab] = useState('judge');
            const [city, setCity] = useState("Âè∞ÂçóÂ∏Ç");
            const [dist, setDist] = useState("‰∏≠Ë•øÂçÄ"); // È†êË®≠ÊâÄÂú®Âú∞
            const [indoor, setIndoor] = useState({ t: 24.0, h: 60 });
            const [obs, setObs] = useState({ t: null, h: null, station: "", loading: false });
            const [fc, setFc] = useState({ data: [], loading: false });

            const fetchData = async () => {
                setObs(p => ({ ...p, loading: true }));
                setFc(p => ({ ...p, loading: true }));
                try {
                    const resObs = await fetch(`${OBS_URL}&Authorization=${CWA_KEY}&locationName=${encodeURIComponent(city)}`);
                    const dObs = await resObs.json();
                    const s = dObs.records.Station.find(x => x.GeoInfo.TownName === dist) || dObs.records.Station[0];
                    setObs({ t: s.WeatherElement.AirTemperature, h: s.WeatherElement.RelativeHumidity, station: s.StationName, loading: false });

                    const resFc = await fetch(`${FC_URL}&Authorization=${CWA_KEY}&locationName=${encodeURIComponent(city)}`);
                    const dFc = await resFc.json();
                    const loc = dFc.records.locations[0].location.find(l => l.locationName === dist) || dFc.records.locations[0].location[0];
                    const pop = loc.weatherElement.find(e => e.elementName === "PoP12h");
                    if (pop) setFc({ data: pop.time.slice(0, 8).map(t => ({ time: t.startTime.substring(5, 13).replace(' ', '\n'), val: parseInt(t.elementValue[0].value) || 0 })), loading: false });
                } catch (e) {
                    setObs(p => ({ ...p, loading: false }));
                    setFc(p => ({ ...p, loading: false }));
                }
            };

            useEffect(() => { fetchData(); }, [city, dist]);

            const analysis = useMemo(() => {
                const inDP = calcDP(indoor.t, indoor.h), outDP = calcDP(obs.t, obs.h);
                if (inDP === null || outDP === null) return null;
                const dDiff = (inDP - outDP).toFixed(1), tDiff = (obs.t - indoor.t).toFixed(1);
                const pass = dDiff >= 2.0 && tDiff <= 3.0;
                return { pass, dDiff, tDiff };
            }, [indoor, obs]);

            return (
                <div className="bg-white min-h-screen md:min-h-0 md:rounded-[2.5rem] shadow-2xl flex flex-col overflow-hidden font-sans border border-slate-200">
                    <header className="bg-slate-900 text-white p-6 pb-2">
                        <div className="flex justify-between items-center mb-4">
                            <div className="flex items-center gap-2">
                                <Icon name="Wind" className="text-emerald-400" />
                                <h1 className="text-xl font-black tracking-tighter uppercase">CWA PRO Âä©Êâã</h1>
                            </div>
                            <button onClick={fetchData} className="p-2 bg-white/10 rounded-full active:scale-95 transition-all">
                                <Icon name="Refresh" className={obs.loading ? "animate-spin" : ""} />
                            </button>
                        </div>
                        <div className="grid grid-cols-2 gap-2 mb-4">
                            <select value={city} onChange={e=>{setCity(e.target.value); setDist(ALL_TAIWAN_AREAS[e.target.value][0])}} className="bg-white/10 border border-white/20 p-2 rounded-xl text-xs font-bold text-white outline-none">
                                {Object.keys(ALL_TAIWAN_AREAS).map(c=><option key={c} value={c} className="text-slate-800">{c}</option>)}
                            </select>
                            <select value={dist} onChange={e=>setDist(e.target.value)} className="bg-white/10 border border-white/20 p-2 rounded-xl text-xs font-bold text-white outline-none">
                                {ALL_TAIWAN_AREAS[city].map(d=><option key={d} value={d} className="text-slate-800">{d}</option>)}
                            </select>
                        </div>
                        <nav className="flex gap-6 mt-2 border-b border-white/10">
                            <button onClick={()=>setTab('judge')} className={`pb-2 text-xs font-bold transition-all ${tab==='judge'?'border-b-2 border-emerald-400 text-emerald-400':'text-slate-500'}`}>ÈñãÁ™óÂà§Êñ∑</button>
                            <button onClick={()=>setTab('forecast')} className={`pb-2 text-xs font-bold transition-all ${tab==='forecast'?'border-b-2 border-emerald-400 text-emerald-400':'text-slate-500'}`}>ÈôçÈõ®Ë∂®Âã¢</button>
                        </nav>
                    </header>

                    <main className="p-5 flex-1 overflow-y-auto space-y-4">
                        {tab === 'judge' ? (
                            <React.Fragment>
                                <section className="bg-slate-50 p-4 rounded-2xl border flex flex-col gap-3 text-slate-800">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest flex justify-between">
                                        <span>ÂØ¶ÊôÇËßÄÊ∏¨ ({obs.station})</span>
                                        <span className="text-emerald-500 font-black">CWA LIVE</span>
                                    </div>
                                    <div className="grid grid-cols-3 gap-2 text-center">
                                        <div className="bg-white p-2 rounded-xl border shadow-sm"><div className="text-[9px] text-slate-400">Ê∫´Â∫¶</div><div className="font-black">{obs.t ?? '--'}¬∞</div></div>
                                        <div className="bg-white p-2 rounded-xl border shadow-sm"><div className="text-[9px] text-slate-400">ÊøïÂ∫¶</div><div className="font-black">{obs.h ?? '--'}%</div></div>
                                        <div className="bg-emerald-50 p-2 rounded-xl border border-emerald-100"><div className="text-[9px] text-emerald-600 font-bold">Èú≤Èªû</div><div className="font-black text-emerald-600">{calcDP(obs.t, obs.h) ?? '--'}¬∞</div></div>
                                    </div>
                                </section>

                                <section className="bg-slate-50 p-4 rounded-2xl border space-y-3">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1"><Icon name="Home" className="w-3 h-3"/> ÂÆ§ÂÖßÁí∞Â¢É</div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <input type="number" step="0.1" value={indoor.t} onChange={e=>setIndoor({...indoor, t: e.target.value})} className="w-full p-2 border rounded-xl font-bold bg-white text-slate-800" />
                                        <input type="number" step="1" value={indoor.h} onChange={e=>setIndoor({...indoor, h: e.target.value})} className="w-full p-2 border rounded-xl font-bold bg-white text-slate-800" />
                                    </div>
                                </section>

                                {analysis && (
                                    <div className={`${analysis.pass?'bg-emerald-600':'bg-slate-700'} p-6 rounded-[2rem] text-white shadow-xl transition-all`}>
                                        <div className="flex items-center gap-3 mb-4">
                                            {analysis.pass ? <Icon name="Check" /> : <Icon name="X" />}
                                            <h2 className="text-2xl font-black">{analysis.pass?'Âª∫Ë≠∞ÈñãÁ™ó':'Âª∫Ë≠∞ÈóúÁ™ó'}</h2>
                                        </div>
                                        <div className="grid grid-cols-2 gap-2 text-center">
                                            <div className="bg-black/10 p-3 rounded-xl border border-white/10"><div className="text-[9px] opacity-60 font-bold">Èú≤ÈªûÂ∑Æ (‚â•2.0)</div><div className="text-xl font-mono font-bold">{analysis.dDiff}</div></div>
                                            <div className="bg-black/10 p-3 rounded-xl border border-white/10 text-center"><div className="text-[9px] opacity-60 font-bold">Ê∫´Â∑Æ (‚â§3.0)</div><div className="text-xl font-mono font-bold">{analysis.tDiff}</div></div>
                                        </div>
                                    </div>
                                )}
                            </React.Fragment>
                        ) : (
                            <section className="space-y-4">
                                <div className="bg-slate-900 p-6 rounded-[2rem] text-white min-h-[250px] flex flex-col">
                                    <h3 className="text-sm font-bold mb-6 flex items-center gap-2 text-blue-400"><Icon name="Rain" /> 72 Â∞èÊôÇÈôçÈõ®Ê©üÁéá</h3>
                                    {fc.loading ? (
                                        <div className="flex-1 flex items-center justify-center text-xs opacity-50 font-black tracking-widest uppercase">Êï∏ÊìöËºâÂÖ•‰∏≠...</div>
                                    ) : (
                                        <div className="flex items-end justify-between h-32 gap-1 mb-4 overflow-x-auto pb-4">
                                            {fc.data.map((d, i) => (
                                                <div key={i} className="flex-1 min-w-[35px] flex flex-col items-center gap-1">
                                                    <div className="text-[8px] font-bold text-blue-300">{d.val}%</div>
                                                    <div className="w-full bg-blue-500/40 rounded-t-sm transition-all" style={{height: `${Math.max(d.val, 5)}%`}}></div>
                                                    <div className="text-[7px] text-white/50 text-center whitespace-pre mt-1">{d.time}</div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                                <div className="p-4 bg-slate-50 rounded-2xl border border-slate-200 text-xs text-slate-500 leading-relaxed border-l-4 border-l-blue-400">
                                    üí° Â∞àÊ•≠ÊèêÁ§∫ÔºöÁï∂ÈôçÈõ®Ê©üÁéáÈ´òÊñº 30% ÊôÇÔºåÂç≥‰æøÈô§ÊøïÊåáÊ®ôÈÅîÊàêÔºåÈñãÁ™ó‰ªçÈúÄÈö®ÊôÇÁïôÊÑèÂ§©Ëâ≤ËÆäÂåñ„ÄÇ
                                </div>
                            </section>
                        )}
                    </main>
                    <footer className="p-4 text-center text-[9px] text-slate-400 border-t bg-slate-50 font-bold tracking-widest uppercase">
                        Data Source: Central Weather Administration
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
